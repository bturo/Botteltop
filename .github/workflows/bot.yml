name: Telegram Channel Bot

on:
  workflow_dispatch:  # Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ
  schedule:
    - cron: '*/5 * * * *'  # Ù‡Ø± 5 Ø¯Ù‚ÛŒÙ‚Ù‡

jobs:
  run-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Install dependencies
      run: |
        pip install telethon==1.28.5
        pip install requests==2.31.0
        
    - name: Run Telegram Bot
      env:
        API_ID: ${{ secrets.API_ID }}
        API_HASH: ${{ secrets.API_HASH }}
        SOURCE_CHANNEL: ${{ secrets.SOURCE_CHANNEL }}
        TARGET_CHANNEL: ${{ secrets.TARGET_CHANNEL }}
        SESSION_STRING: ${{ secrets.SESSION_STRING }}
      run: |
        echo "ğŸš€ Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…..."
        echo "API_ID: $API_ID"
        echo "SOURCE_CHANNEL: $SOURCE_CHANNEL"
        echo "TARGET_CHANNEL: $TARGET_CHANNEL"
        
        python -c "
import os
import sys
import asyncio

print('ğŸ” Ø¨Ø±Ø±Ø³ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª...')
api_id = os.environ.get('API_ID')
api_hash = os.environ.get('API_HASH')
session_string = os.environ.get('SESSION_STRING')

if not all([api_id, api_hash, session_string]):
    print('âŒ ÛŒÚ© ÛŒØ§ Ú†Ù†Ø¯ Secret ÛŒØ§ÙØª Ù†Ø´Ø¯!')
    sys.exit(1)

print('âœ… Ù‡Ù…Ù‡ Secrets ÛŒØ§ÙØª Ø´Ø¯')

# Ø§Ø¯Ø§Ù…Ù‡ Ú©Ø¯ Ø±Ø¨Ø§Øª
print('ğŸ¤– Ø±Ø¨Ø§Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø¬Ø±Ø§Ø³Øª...')
        "
